---
layout: post
title: 数据库-大致分类
category: 技术向
tags: database
---

> 首先说一下数据库的分类。统一的分类应该是关系型数据库和非关系型数据库。关系型数据库主要有Oracle和MySQL，非关系型数据库比较多，下面来详细说明。

## 关系型数据库和非关系型数据库
### 关系型数据库(SQL)
关系型数据库模型是把复杂的数据结构归**简单的二元关系（即二维表格形式）**。在关系型数据库中，对数据的操作几乎全部建立在一个或多个关系表格上，通过对这些关联的表格分类、合并、连接或选取等运算来实现数据库的管理。

![SQL_example.png](https://i.loli.net/2019/03/05/5c7e0fe9ebe58.png)


### 非关系型数据库(NoSQL)
NoSQL，泛指非关系型的数据库。随着互联网web2.0网站的兴起，*传统的关系数据库在应付web2.0网站，特别是超大规模和高并发的SNS类型的web2.0纯动态网站已经显得力不从心*，暴露了很多难以克服的问题，而非关系型的数据库则由于其本身的特点得到了非常迅速的发展。NoSql数据库在特定的场景下可以发挥出难以想象的高效率和高性能，它是作为对传统关系型数据库的一个有效的补充。

### 两者的比较
#### SQL的优点及缺陷
- **优点**:容易理解：二维表结构是非常贴近逻辑世界的一个概念
使用方便：通用的SQL语言使得操作关系型数据库非常方便
易于维护：丰富的完整性大大减低了数据冗余和数据不一致的概率

- **但是**:高并发读写需求：网站的用户并发性非常高，往往达到每秒上万次读写请求，对于传统关系型数据库来说，硬盘I/O是一个很大的瓶颈；海量数据的高效率读写：网站每天产生的数据量是巨大的，对于关系型数据库来说，在一张包含海量数据的表中查询，效率是非常低的；高扩展性和可用性：在基于web的结构当中，数据库是最难进行横向扩展的，当一个应用系统的用户量和访问量与日俱增的时候，数据库却没有办法像web server和app server那样简单的通过添加更多的硬件和服务节点来扩展性能和负载能力。对于很多需要提供24小时不间断服务的网站来说，对数据库系统进行升级和扩展是非常痛苦的事情，往往需要停机维护和数据迁移。

- **缺陷**:
1. 事务一致性：关系型数据库在对事物一致性的维护中有很大的开销，而现在很多web2.0系统对事物的读写一致性都不高，事务的一致性不那么重要。
2. 读写实时性：关系型数据库为了维护一致性所付出的巨大代价就是其读写性能比较差，对关系数据库来说，插入一条数据之后立刻查询，是肯定可以读出这条数据的，但是对于很多web应用来说，并不要求这么高的实时性，而并发读写能力要求极高，关系型数据库无法应付，必须用新的一种数据结构存储来代替关系数据库。
3. 固定的表结构：扩展性极差，系统的升级，功能的增加，往往意味着数据结构巨大变动，这一点关系型数据库也难以应付，需要新的结构化数据存储。
4. 复杂SQL，特别是多表关联查询：任何大数据量的web系统，都非常忌讳多个大表的关联查询，以及复杂的数据分析类型的复杂SQL报表查询，从需求以及产品阶级角度，就避免了这种情况的产生。往往更多的只是单表的主键查询，以及单表的简单条件分页查询，SQL的功能极大的弱化了。

#### 两者的比较
1. 存储方式
关系型数据库是表格式的，因此存储在表的行和列中。他们之间很容易关联协作存储，提取数据很方便。而 Nosql 数据库则与其相反，他是大块的组合在一起。通常存储在数据集中，就像文档、键值对或者图结构。

2. 存储结构
关系型数据库对应的是结构化数据，数据表都**预先定义**了结构（列的定义），结构描述了数据的形式和内容。这一点对数据建模至关重要，虽然预定义结构带来了可靠性和稳定性，但是修改这些数据比较困难。而Nosql 数据库基于动态结构，使用与非结构化数据。因为 Nosql 数据库是动态结构，可以很容易适应数据类型和结构的变化。

3. 存储规范
关系型数据库的数据存储为了更高的规范性，把数据分割为最小的关系表以避免重复，获得精简的空间利用。虽然管理起来很清晰，但是单个操作设计到多张表的时候，数据管理就显得有点麻烦。而 Nosql 数据存储在平面数据集中，数据经常可能会重复。单个数据库很少被分隔开，而是存储成了一个整体，这样整块数据更加便于读写

4. 存储扩展
这可能是两者之间最大的区别，**关系型数据库是纵向扩展**，也就是说想要提高处理能力，要使用速度更快的计算机。因为数据存储在关系表中，操作的性能瓶颈可能涉及到多个表，需要通过提升计算机性能来克服。虽然有很大的扩展空间，但是最终会达到纵向扩展的上限。而 **Nosql 数据库是横向扩展的**，它的存储天然就是分布式的，可以通过给资源池添加更多的普通数据库服务器来分担负载。

5. 查询方式
关系型数据库通过结构化查询语言来操作数据库（就是我们通常说的SQL）。SQL 支持数据库 CURD 操作的功能非常强大，是业界的标准用法。而 Nosql 查询以块为单元操作数据，使用的是非结构化查询语言（UnQl），它是没有标准的。关系型数据库表中主键的概念对应 Nosql 中存储文档的 ID。关系型数据库使用预定义优化方式（比如索引）来加快查询操作，而 Nosql 更简单更精确的数据访问模式。

6. 事务
关系型数据库遵循 ACID 规则（原子性( Atomicity )、一致性( Consistency )、隔离性( Isolation )、持久性( Durability )），而 Nosql数据库遵循 BASE 原则（基本可用（Basically Availble）、软/柔性事务（Soft-state ）、最终一致性（Eventual Consistency））。由于关系型数据库的数据强一致性，所以对事务的支持很好。关系型数据库支持对事务原子性细粒度控制，并且易于回滚事务。而 Nosql 数据库是在 CAP（一致性、可用性、分区容忍度）中任选两项，因为基于节点的分布式系统中，很难全部满足，所以对事务的支持不是很好，虽然也可以使用事务，但是并不是 Nosql 的闪光点。

7. 性能
关系型数据库为了维护数据的一致性付出了巨大的代价，读写性能比较差。在面对高并发读写性能非常差，面对海量数据的时候效率非常低。而Nosql 存储的格式都是 key-value 类型的，并且存储在内存中，非常容易存储，而且对于数据的 一致性是 弱要求。Nosql 无需 sql 的解析，提高了读写性能。

8. 授权方式
关系型数据库通常有 SQL Server，Mysql，Oracle。主流的 Nosql 数据库有redis，memcache，MongoDb。大多数的关系型数据库都是付费的并且价格昂贵，成本较大，而 Nosql 数据库通常都是开源的。

## 非关系型数据库种类
> 用于指代那些非关系型的，分布式的，且一般不保证遵循ACID原则的数据存储系统。
以**键值对**存储，且结构不固定，每一个元组可以有不一样的字段，每个元组可以根据需要增加一些自己的键值对，这样就不会局限于固定的结构，可以减少一些时间和空间的开销。使用这种方式，用户可以根据需要去添加自己需要的字段，这样，为了获取用户的不同信息，不需要像关系型数据库中，要对多表进行关联查询。仅需要根据id取出相应的value就可以完成查询。但**非关系型数据库由于很少的约束**，他也不能够提供像SQL所提供的where这种对于字段属性值情况的查询。并且难以体现设计的完整性。他只适合存储一些较为简单的数据，对于需要进行较复杂查询的数据，关系型数据库显的更为合适。
### 键值存储数据库(key-value)
好比传统语言用的**hashtable**，可以用key来添加、查询或者删除数据，因为使用key主键进行访问，所以会有很高的性能和扩展性。

键值数据库主要使用一个哈希表，这个表中有一个特定的键和一个指针指向特定的数据。Key/value模型对于IT系统来说的优势在于**简单、易部署、高并发**。

**典型产品**：Memcached、Redis、MemcacheDB

### 列存储数据库
列存储数据库将数据存储在列族中，一个列族存储经常被一起查询的相关数据，比如人类，我们经常会查询某个人的姓名和年龄，而不是薪资。这种情况下姓名和年龄会被放到一个列族中，薪资会被放到另一个列族中。

这种数据库通常用来应对分布式存储海量数据。

**典型产品**：Cassandra、HBase

### 文档型数据库
文档型数据库的灵感是来自于Lotus Notes办公软件，而且它同第一种键值数据库类似。该类型的数据模型是版本化的文档，半结构化的文档以特定的格式存储，比如JSON。文档型数据库可以看作是键值数据库的升级版，允许之间嵌套键值。而且文档型数据库**比键值数据库的查询效率更高**。

面向文档数据库会将数据以文档形式存储(说白了就是string)。每个文档都是自包含的数据单元，是一系列数据项的集合。每个数据项都有一个名词与对应值，值既可以是简单的数据类型，如字符串、数字和日期等；也可以是复杂的类型，如有序列表和关联对象。数据存储的最小单位是文档，同一个表中存储的文档属性可以是不同的，数据可以使用XML、JSON或BSON等多种形式存储。

**典型产品**：MongoDB、CouchDB

### 图数据库
图形数据库允许我们将数据以图的方式存储。实体会被作为顶点，而实体之间的关系则会被作为边。比如我们有三个实体，Steve Jobs、Apple和Next，则会有两个“Founded by”的边将Apple和Next连接到Steve Jobs。
**典型产品**：Neo4J、InforGrid

## 用谁好？
[电商服务类企业级应用里，能否用Mongodb直接替换掉mysql？](https://www.zhihu.com/question/29054820)

## reference
1. [超全的数据库分类介绍](https://www.jianshu.com/p/107c6b045245)
2. [简析关系型数据库和非关系型数据库的比较（上）](https://zhuanlan.zhihu.com/p/31140332)
3. [简析关系型数据库和非关系型数据库的比较（下）](https://zhuanlan.zhihu.com/p/31167203)



